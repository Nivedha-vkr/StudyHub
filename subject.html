<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subjects Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='subject.css') }}">
</head>
<body>

<!-- Header -->
<header>  
  <div class="brand">  
    <div class="logo">ğŸ“</div>  
    <div class="title">GCWK</div>  
  </div>  
  <button class="back-btn" onclick="history.back()">Back</button>  
</header>  

<!-- Heading Box -->
<div class="heading-box">
  {{ degree }} - {{ batch }} | Year {{ year }} | Sem {{ sem }}
</div>

<!-- Subjects Grid -->
<div class="subjects-grid" id="subjectGrid">
  {% for subject in subjects %}
    <div class="subject-box">
      <a href="{{ url_for('materials', subject_id=subject['id']) }}">{{ subject['name'] }}</a>

      {% if session['role'] == 'admin' %}
        <!-- Small edit + delete -->
        <button class="edit-btn" data-id="{{ subject['id'] }}" data-name="{{ subject['name'] }}">âœï¸</button>
        <form action="{{ url_for('delete_subject', subject_id=subject['id']) }}" method="POST" style="display:inline;">
          <button type="submit" class="delete-btn">ğŸ—‘</button>
        </form>
      {% endif %}
    </div>
  {% endfor %}
</div>

{% if session['role'] == 'admin' %}
  <!-- Add Subject -->
  <form action="{{ url_for('add_subject') }}" method="POST" class="add-form">
    <input type="hidden" name="batch" value="{{ batch_id }}">
    <input type="hidden" name="degree" value="{{ degree }}">
    <input type="hidden" name="year" value="{{ year }}">
    <input type="hidden" name="sem" value="{{ sem }}">
    <input type="text" name="subject_name" placeholder="Enter new subject" required>
    <button type="submit" class="add-btn">+ Add Subject</button>
  </form>
{% endif %}

<script src="{{ url_for('static', filename='subject.js') }}"></script>
</body>
</html>